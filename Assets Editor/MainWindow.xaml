<Window x:Class="Assets_Editor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Assets_Editor"
        mc:Ignorable="d"
        Title="Assets Editor" Height="390" Width="600"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Style="{StaticResource MaterialDesignWindow}">

    <Window.Resources>
        <Style x:Key="SelectableTextBlockStyle" TargetType="TextBox">
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Foreground" Value="{DynamicResource MaterialDesignTextForeground}" />
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="CaretBrush" Value="{x:Null}"/>
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="materialDesign:TextFieldAssist.DecorationVisibility" Value="Collapsed"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10,12,10,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <Border BorderBrush="Gray" BorderThickness="1" Padding="0,30,0,30" CornerRadius="4"/>
            <TextBlock Text="Editor Settings"
                Background="{DynamicResource MaterialDesignPaper}"
                Padding="4, 1, 4, 0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="9 -9 0 0"/>

            <Grid Grid.Row="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal" Grid.Column="0">
                    <StackPanel Orientation="Vertical" Width="60" VerticalAlignment="Center">
                        <Label Content="Preset:" HorizontalAlignment="Right" VerticalAlignment="Center" FontWeight="Bold" />
                    </StackPanel>
                    <ComboBox x:Name="A_SavedVersion" Width="160" Height="30" BorderThickness="1,1,1,1" SelectedIndex="0" Margin="3,0,0,0" Padding="6,1,5,3" IsReadOnly="True"/>
                    <Button x:Name="NewPresetBtn" 
            Style="{StaticResource MaterialDesignRaisedButton}"
            Margin="15,0,0,0"
            Click="SelectAssetsFolder"
            ToolTip="Create a new preset">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Plus" Margin="0,0,5,0" VerticalAlignment="Center"/>
                            <TextBlock Text="New"/>
                        </StackPanel>
                    </Button>
                    <Button x:Name="DeletePresetBtn" 
Style="{StaticResource MaterialDesignRaisedButton}"
Margin="5,0,0,0"
Click="SelectAssetsFolder"
ToolTip="Remove preset">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Delete" Margin="0,0,5,0" VerticalAlignment="Center"/>
                            <TextBlock Text="Remove"/>
                        </StackPanel>
                    </Button>
                </StackPanel>

                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center" Grid.Column="1">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Center" Height="40">
                        <Label Content="Light" VerticalAlignment="Center"/>
                        <ToggleButton x:Name="DarkModeToggle" Margin="5,0,5,0" Checked="DarkModeToggle_Checked" Unchecked="DarkModeToggle_Checked"/>
                        <Label Content="Dark" VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Grid>

        <Grid Margin="0,15,0,0" Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition Height="auto" />
            </Grid.RowDefinitions>

            <Border BorderBrush="Gray" BorderThickness="1" Padding="0,30,0,30" CornerRadius="4"/>
            <TextBlock Text="Assets Settings"
                Background="{DynamicResource MaterialDesignPaper}"
                Padding="4, 1, 4, 0"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="9 -9 0 0"/>
            
            <Grid Margin="0,10,0,0" Grid.Row="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="130" />
                </Grid.RowDefinitions>

                <StackPanel Orientation="Horizontal" Grid.Row="0" HorizontalAlignment="Center" Margin="0,10,0,0">
                    <Label Content="DAT File Path:" HorizontalAlignment="Right" VerticalAlignment="Center" />
                    <TextBox
                        x:Name="AssetsPath"
                        VerticalAlignment="Center"
                        Width="330"
                        IsEnabled="False"
                        Margin="5,0,0,0"
                    />

                    <Button Style="{StaticResource MaterialDesignIconButton}" materialDesign:RippleAssist.IsDisabled="True" VerticalAlignment="Center" Height="55" Width="40" Margin="5,0,0,0" Click="SelectAssetsFolder">
                        <materialDesign:PackIcon  Kind="CardSearch" Height="40" Width="40" />
                    </Button>
                    <Button ToolTip="Copy Path" Style="{StaticResource MaterialDesignIconButton}" Width="24" Height="24" VerticalAlignment="Center" Click="CopyAssetsPath" Margin="3,0,0,0">
                        <materialDesign:PackIcon  Kind="ContentCopy" Height="20" Width="20" />
                    </Button>
                </StackPanel>

                <StackPanel Orientation="Horizontal"
                            Grid.Row="1"
                            Margin="140,-10,0,0">

                    <materialDesign:PackIcon x:Name="AssetsPathBaseIcon"
                                             Kind="Info"
                                             Width="16"
                                             Height="16"
                                             Visibility="Hidden"/>

                    <materialDesign:PackIcon x:Name="AssetsPathLoadingIcon"
                                             Kind="Loading"
                                             Width="16"
                                             Height="16"
                                             Visibility="Visible">

                        <materialDesign:PackIcon.RenderTransform>
                            <RotateTransform x:Name="LoadingRotate"
                                             Angle="0"
                                             CenterX="8"
                                             CenterY="8"/>
                        </materialDesign:PackIcon.RenderTransform>

                        <materialDesign:PackIcon.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="LoadingRotate"
                                                         Storyboard.TargetProperty="Angle"
                                                         From="0"
                                                         To="360"
                                                         Duration="0:0:1"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </materialDesign:PackIcon.Triggers>

                    </materialDesign:PackIcon>

                    <TextBlock x:Name="AssetsPathLoadingMessage"
                               Text="Initializing ..."
                               Padding="2,0"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <Grid Grid.Row="2" Margin="0,20,0,0" HorizontalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="130"/>
                        <ColumnDefinition Width="170"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="70"/>
                            <RowDefinition Height="auto"/>
                        </Grid.RowDefinitions>

                        <TextBox x:Name="AppearancesCount"
                                Style="{StaticResource SelectableTextBlockStyle}"
                                Text="Items:&#9;&#9;0&#10;Outfits:&#9;&#9;0&#10;Effects:&#9;&#9;0&#10;Missiles:&#9;&#9;0"
                                 Grid.Row="0"/>
                    </Grid>

                    <StackPanel Orientation="Vertical" HorizontalAlignment="Right" Grid.Column="1">
                        <StackPanel Orientation="Horizontal">
                            <ToggleButton x:Name="DatExtendedToggle" Margin="5,0,5,0" Checked="DatExtended_Changed" Unchecked="DatExtended_Changed" IsEnabled="False"/>
                            <Label Content="Extended"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <ToggleButton x:Name="DatTransparentToggle" Margin="5,0,5,0" Checked="DatTransparent_Changed" Unchecked="DatTransparent_Changed" IsEnabled="False"/>
                            <Label Content="Transparency"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <ToggleButton x:Name="DatAnimationsToggle" Margin="5,0,5,0" Checked="DatAnimations_Changed" Unchecked="DatAnimations_Changed" IsEnabled="False"/>
                            <Label Content="Improved Animations"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <ToggleButton x:Name="DatFrameGroupsToggle" Margin="5,0,5,0" Checked="DatFrameGroup_Changed" Unchecked="DatFrameGroup_Changed" IsEnabled="False"/>
                            <Label Content="Frame Groups"/>
                        </StackPanel>
                    </StackPanel>

                    <Grid Grid.Column="2" Margin="30,2,0,0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="70"/>
                            <RowDefinition Height="25"/>
                        </Grid.RowDefinitions>

                        <TextBox x:Name="AssetsVersionInfo"
                                 Style="{StaticResource SelectableTextBlockStyle}"
                                 Text="No version loaded"
                                 Grid.Row="0" />

                        <ComboBox x:Name="DatStructureDropdown"
                                  Width="100"
                                  Height="25"
                                  BorderThickness="1,1,1,1"
                                  SelectedIndex="1"
                                  Padding="10,3,5,3"
                                  IsReadOnly="True"
                                  Grid.Row="1"
                                  IsEnabled="False"
                                  SelectionChanged="DatStructureType_SelectionChanged"
                        />

                    </Grid>
                </Grid>

                <materialDesign:Snackbar
                    Grid.Row="2"
                    x:Name="StatusBar"
                    MessageQueue="{materialDesign:MessageQueue}"
                    IsActive="False"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"
                    ScrollViewer.VerticalScrollBarVisibility="Disabled"
                    Padding="0,-20,0,0" />
            </Grid>

            <Button Grid.Row="1" x:Name="LoadAssets" HorizontalAlignment="Center" VerticalAlignment="Top" IsEnabled="False" Click="LoadAssets_Click" Margin="0,10,0,0">
                <Button.Content>
                    <StackPanel>
                        <TextBlock Text="Load Assets" HorizontalAlignment="Center"/>
                        <ProgressBar x:Name="LoadProgress" Minimum="0" Maximum="100" Value="0" Width="200" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="-10,0,-10,0" Height="8" />
                    </StackPanel>
                </Button.Content>
            </Button>
        </Grid>
    </Grid>
</Window>
